# KeyForge - ç¼–è¾‘å™¨å¿«æ·é”®è®­ç»ƒå·¥å…·

## äº§å“éœ€æ±‚æ–‡æ¡£ (PRD)

---

## 1. äº§å“æ¦‚è¿°

### 1.1 äº§å“å®šä½

**KeyForge** æ˜¯ä¸€ä¸ªåŸºäºå‘½ä»¤è¡Œçš„äº¤äº’å¼ç¼–è¾‘å™¨å¿«æ·é”®è®­ç»ƒå·¥å…·ï¼Œçµæ„Ÿæ¥æºäº [Githug](https://github.com/Gazler/githug)ã€‚é€šè¿‡å…³å¡åˆ¶çš„æŒ‘æˆ˜æ¨¡å¼ï¼Œå¸®åŠ©ç”¨æˆ·å¿«é€ŸæŒæ¡ VSCode å’Œ VSCode+Vim çš„å¿«æ·é”®ç»„åˆï¼Œå½¢æˆè‚Œè‚‰è®°å¿†ã€‚

### 1.2 ç›®æ ‡ç”¨æˆ·

- åˆšæ¥è§¦ VSCode çš„æ–°æ‰‹å¼€å‘è€…
- å¸Œæœ›æå‡ç¼–ç æ•ˆç‡çš„ä¸­çº§å¼€å‘è€…
- æƒ³è¦å­¦ä¹  Vim æ¨¡å¼çš„ VSCode ç”¨æˆ·
- ä»å…¶ä»–ç¼–è¾‘å™¨è¿ç§»åˆ° VSCode çš„å¼€å‘è€…

### 1.3 æ ¸å¿ƒä»·å€¼

| ç—›ç‚¹ | è§£å†³æ–¹æ¡ˆ |
|------|----------|
| å¿«æ·é”®å¤ªå¤šï¼Œéš¾ä»¥è®°å¿† | åˆ†ç±»åˆ†çº§ï¼Œå¾ªåºæ¸è¿› |
| ç¼ºä¹å®è·µåœºæ™¯ | æƒ…æ™¯åŒ–æŒ‘æˆ˜ï¼Œæ¨¡æ‹ŸçœŸå®ç¼–è¾‘åœºæ™¯ |
| é—å¿˜å¿« | é—´éš”é‡å¤è®­ç»ƒï¼Œå¼ºåŒ–è®°å¿† |
| æ— æ³•è¿½è¸ªè¿›åº¦ | å®Œæ•´çš„è¿›åº¦è¿½è¸ªå’Œç»Ÿè®¡ç³»ç»Ÿ |

---

## 2. åŠŸèƒ½åˆ—è¡¨

### 2.1 æ ¸å¿ƒåŠŸèƒ½

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                        KeyForge åŠŸèƒ½æ¶æ„                          â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚  å…³å¡ç³»ç»Ÿ   â”‚  â”‚  è®­ç»ƒæ¨¡å¼   â”‚  â”‚      è¿›åº¦è¿½è¸ª           â”‚  â”‚
â”‚  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤  â”‚
â”‚  â”‚ â€¢ è§£é”æœºåˆ¶  â”‚  â”‚ â€¢ æŒ‘æˆ˜æ¨¡å¼  â”‚  â”‚ â€¢ å®ŒæˆçŠ¶æ€             â”‚  â”‚
â”‚  â”‚ â€¢ éš¾åº¦åˆ†çº§  â”‚  â”‚ â€¢ è‡ªç”±ç»ƒä¹   â”‚  â”‚ â€¢ ç»Ÿè®¡æ•°æ®             â”‚  â”‚
â”‚  â”‚ â€¢ åœºæ™¯æè¿°  â”‚  â”‚ â€¢ å¤ä¹ æ¨¡å¼  â”‚  â”‚ â€¢ å¼±é¡¹åˆ†æ             â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚  é”®ä½é…ç½®   â”‚  â”‚  æç¤ºç³»ç»Ÿ   â”‚  â”‚      å‘½ä»¤è¡Œæ¥å£         â”‚  â”‚
â”‚  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤  â”‚
â”‚  â”‚ â€¢ VSCode    â”‚  â”‚ â€¢ åˆ†çº§æç¤º  â”‚  â”‚ â€¢ play/hint/reset      â”‚  â”‚
â”‚  â”‚ â€¢ VSCode+Vimâ”‚  â”‚ â€¢ ç­”æ¡ˆå±•ç¤º  â”‚  â”‚ â€¢ levels/stats         â”‚  â”‚
â”‚  â”‚ â€¢ è‡ªå®šä¹‰    â”‚  â”‚ â€¢ åŠ©è®°æŠ€å·§  â”‚  â”‚ â€¢ config               â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 2.2 è¯¦ç»†åŠŸèƒ½æ¸…å•

#### 2.2.1 å…³å¡ç³»ç»Ÿ (Level System)

| åŠŸèƒ½ | æè¿° | ä¼˜å…ˆçº§ | è¿›åº¦ |
|------|------|--------|------|
| å…³å¡å®šä¹‰ | YAML/JSON æ ¼å¼çš„å…³å¡é…ç½®æ–‡ä»¶ | P0 | âœ… å·²å®Œæˆ |
| éš¾åº¦åˆ†çº§ | åˆçº§/ä¸­çº§/é«˜çº§ä¸‰ä¸ªéš¾åº¦ç­‰çº§ | P0 | âœ… å·²å®Œæˆ |
| åˆ†ç±»æ ‡ç­¾ | æŒ‰åŠŸèƒ½åˆ†ç±»ï¼šå¯¼èˆªã€ç¼–è¾‘ã€æœç´¢ã€è°ƒè¯•ç­‰ | P0 | âœ… å·²å®Œæˆ |
| åœºæ™¯æè¿° | æ¯ä¸ªå…³å¡åŒ…å«å®é™…ä½¿ç”¨åœºæ™¯çš„æè¿° | P0 | âœ… å·²å®Œæˆ |
| è§£é”æœºåˆ¶ | å®Œæˆå‰ç½®å…³å¡åè§£é”åç»­å…³å¡ | P1 | â¬œ å¾…å¼€å‘ |
| è‡ªå®šä¹‰å…³å¡ | ç”¨æˆ·å¯ä»¥åˆ›å»ºè‡ªå®šä¹‰å…³å¡ | P2 | â¬œ å¾…å¼€å‘ |

#### 2.2.2 è®­ç»ƒæ¨¡å¼ (Training Modes)

| åŠŸèƒ½ | æè¿° | ä¼˜å…ˆçº§ | è¿›åº¦ |
|------|------|--------|------|
| æŒ‘æˆ˜æ¨¡å¼ | æŒ‰é¡ºåºå®Œæˆå…³å¡ï¼Œç±»ä¼¼ Githug | P0 | âœ… å·²å®Œæˆ |
| è‡ªç”±ç»ƒä¹  | å¯é€‰æ‹©ä»»æ„å·²è§£é”å…³å¡ç»ƒä¹  | P1 | â¬œ å¾…å¼€å‘ |
| å¤ä¹ æ¨¡å¼ | åŸºäºé—å¿˜æ›²çº¿çš„é—´éš”é‡å¤å¤ä¹  | P2 | â¬œ å¾…å¼€å‘ |
| é™æ—¶æ¨¡å¼ | åœ¨é™å®šæ—¶é—´å†…å®ŒæˆæŒ‘æˆ˜ | P2 | â¬œ å¾…å¼€å‘ |
| éšæœºæ¨¡å¼ | éšæœºæŠ½å–å·²è§£é”å…³å¡è¿›è¡Œæµ‹è¯• | P2 | â¬œ å¾…å¼€å‘ |

#### 2.2.3 é”®ä½é…ç½® (Keymap Profiles)

| åŠŸèƒ½ | æè¿° | ä¼˜å…ˆçº§ | è¿›åº¦ |
|------|------|--------|------|
| VSCode é»˜è®¤ | æ”¯æŒ VSCode åŸç”Ÿå¿«æ·é”® | P0 | âœ… å·²å®Œæˆ |
| VSCode + Vim | æ”¯æŒ Vim æ‰©å±•çš„é¢å¤–å¿«æ·é”® | P0 | âœ… å·²å®Œæˆ |
| å¹³å°é€‚é… | è‡ªåŠ¨è¯†åˆ« macOS/Windows/Linux | P0 | âœ… å·²å®Œæˆ |
| è‡ªå®šä¹‰æ˜ å°„ | å…è®¸ç”¨æˆ·å¯¼å…¥è‡ªå®šä¹‰ keybindings.json | P2 | â¬œ å¾…å¼€å‘ |

#### 2.2.4 äº¤äº’å‘½ä»¤ (CLI Commands)

| å‘½ä»¤ | æè¿° | ç¤ºä¾‹ |
|------|------|------|
| `keyforge play` | å¼€å§‹/ç»§ç»­å½“å‰å…³å¡ | `keyforge play` |
| `keyforge hint` | è·å–å½“å‰å…³å¡æç¤º | `keyforge hint` |
| `keyforge answer` | æŸ¥çœ‹ç­”æ¡ˆï¼ˆä¼šæ‰£åˆ†ï¼‰ | `keyforge answer` |
| `keyforge reset` | é‡ç½®å½“å‰å…³å¡ | `keyforge reset` |
| `keyforge reset all` | é‡ç½®æ‰€æœ‰è¿›åº¦ | `keyforge reset all` |
| `keyforge levels` | æŸ¥çœ‹æ‰€æœ‰å…³å¡åˆ—è¡¨ | `keyforge levels` |
| `keyforge stats` | æŸ¥çœ‹è®­ç»ƒç»Ÿè®¡ | `keyforge stats` |
| `keyforge config` | é…ç½®é”®ä½æ–¹æ¡ˆ | `keyforge config --profile vim` |

#### 2.2.5 è¿›åº¦ä¸ç»Ÿè®¡ (Progress & Stats)

| åŠŸèƒ½ | æè¿° | ä¼˜å…ˆçº§ | è¿›åº¦ |
|------|------|--------|------|
| è¿›åº¦ä¿å­˜ | æœ¬åœ°ä¿å­˜è®­ç»ƒè¿›åº¦ | P0 | âœ… å·²å®Œæˆ |
| å®Œæˆç»Ÿè®¡ | å·²å®Œæˆ/æ€»å…³å¡æ•°é‡ | P0 | âœ… å·²å®Œæˆ |
| å“åº”æ—¶é—´ | è®°å½•æ¯æ¬¡å›ç­”çš„å“åº”æ—¶é—´ | P1 | âœ… å·²å®Œæˆ |
| é”™è¯¯åˆ†æ | åˆ†ææœ€å¸¸å‡ºé”™çš„å¿«æ·é”® | P1 | â¬œ å¾…å¼€å‘ |
| å¼±é¡¹æ¨è | åŸºäºé”™è¯¯ç‡æ¨èå¤ä¹ å†…å®¹ | P2 | â¬œ å¾…å¼€å‘ |

---

## 3. æŠ€æœ¯æ¶æ„

### 3.1 ç³»ç»Ÿæ¶æ„å›¾

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                           KeyForge                                  â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                     â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚   CLI Layer  â”‚â”€â”€â”€â–¶â”‚  Game Engine â”‚â”€â”€â”€â–¶â”‚   Storage Layer      â”‚  â”‚
â”‚  â”‚   (Cobra)    â”‚    â”‚              â”‚    â”‚   (Local JSON/YAML)  â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚         â”‚                   â”‚                      â”‚                â”‚
â”‚         â–¼                   â–¼                      â–¼                â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚   Terminal   â”‚    â”‚ Level Loader â”‚    â”‚   Progress Store     â”‚  â”‚
â”‚  â”‚   Renderer   â”‚    â”‚              â”‚    â”‚                      â”‚  â”‚
â”‚  â”‚ (lipgloss/   â”‚    â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤    â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤  â”‚
â”‚  â”‚  bubbletea)  â”‚    â”‚ Key Verifier â”‚    â”‚   Statistics Store   â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚                                                                     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 3.2 ç›®å½•ç»“æ„

```
keyforge/
â”œâ”€â”€ cmd/                    # å‘½ä»¤è¡Œå…¥å£
â”‚   â””â”€â”€ keyforge/
â”‚       â””â”€â”€ main.go
â”œâ”€â”€ internal/
â”‚   â”œâ”€â”€ cli/               # CLI å‘½ä»¤å®šä¹‰
â”‚   â”‚   â”œâ”€â”€ root.go
â”‚   â”‚   â”œâ”€â”€ play.go
â”‚   â”‚   â”œâ”€â”€ hint.go
â”‚   â”‚   â”œâ”€â”€ levels.go
â”‚   â”‚   â””â”€â”€ stats.go
â”‚   â”œâ”€â”€ engine/            # æ ¸å¿ƒæ¸¸æˆå¼•æ“
â”‚   â”‚   â”œâ”€â”€ game.go
â”‚   â”‚   â”œâ”€â”€ level.go
â”‚   â”‚   â””â”€â”€ verifier.go
â”‚   â”œâ”€â”€ keymap/            # é”®ä½æ˜ å°„
â”‚   â”‚   â”œâ”€â”€ keymap.go
â”‚   â”‚   â”œâ”€â”€ vscode.go
â”‚   â”‚   â””â”€â”€ vim.go
â”‚   â”œâ”€â”€ storage/           # æ•°æ®å­˜å‚¨
â”‚   â”‚   â”œâ”€â”€ progress.go
â”‚   â”‚   â””â”€â”€ stats.go
â”‚   â””â”€â”€ ui/                # ç»ˆç«¯ UI
â”‚       â”œâ”€â”€ renderer.go
â”‚       â””â”€â”€ styles.go
â”œâ”€â”€ levels/                # å…³å¡å®šä¹‰æ–‡ä»¶
â”‚   â”œâ”€â”€ beginner/
â”‚   â”œâ”€â”€ intermediate/
â”‚   â””â”€â”€ advanced/
â”œâ”€â”€ configs/               # é…ç½®æ–‡ä»¶
â”‚   â””â”€â”€ keymaps/
â””â”€â”€ go.mod
```

### 3.3 æŠ€æœ¯é€‰å‹

| ç»„ä»¶ | æŠ€æœ¯é€‰æ‹© | ç†ç”± |
|------|----------|------|
| CLI æ¡†æ¶ | [Cobra](https://github.com/spf13/cobra) | Go ç”Ÿæ€æœ€æµè¡Œçš„ CLI æ¡†æ¶ |
| ç»ˆç«¯ UI | [Bubble Tea](https://github.com/charmbracelet/bubbletea) | ç°ä»£åŒ–çš„ç»ˆç«¯ UI æ¡†æ¶ |
| æ ·å¼æ¸²æŸ“ | [Lipgloss](https://github.com/charmbracelet/lipgloss) | å£°æ˜å¼ç»ˆç«¯æ ·å¼ |
| é…ç½®è§£æ | [Viper](https://github.com/spf13/viper) | æ”¯æŒå¤šç§é…ç½®æ ¼å¼ |
| æŒ‰é”®æ•è· | [keyboard](https://github.com/eiannone/keyboard) | è·¨å¹³å°é”®ç›˜äº‹ä»¶æ•è· |
| æ•°æ®å­˜å‚¨ | JSON/YAML æ–‡ä»¶ | è½»é‡çº§ï¼Œæ— éœ€æ•°æ®åº“ä¾èµ– |

---

## 4. æ ¸å¿ƒæ¨¡å—å®ç°æ–¹æ¡ˆ

### 4.1 å…³å¡å®šä¹‰ç»“æ„ (Level Definition)

å…³å¡ä½¿ç”¨ YAML æ ¼å¼å®šä¹‰ï¼Œä¾¿äºé˜…è¯»å’Œç»´æŠ¤ã€‚

```yaml
# levels/beginner/001_save_file.yaml
id: "001"
name: "ä¿å­˜æ–‡ä»¶"
category: "basic"
difficulty: "beginner"
profile: "vscode"  # vscode | vim | both

description: |
  ä½ åˆšå†™å®Œä¸€æ®µä»£ç ï¼Œç°åœ¨éœ€è¦ä¿å­˜æ–‡ä»¶ã€‚
  è¯·è¾“å…¥æ­£ç¡®çš„å¿«æ·é”®ç»„åˆæ¥ä¿å­˜å½“å‰æ–‡ä»¶ã€‚

scenario: "save_file"

expected_keys:
  macos: ["Cmd", "S"]
  windows: ["Ctrl", "S"]
  linux: ["Ctrl", "S"]

hints:
  - "è¿™æ˜¯ä¸€ä¸ªéå¸¸åŸºç¡€çš„æ“ä½œï¼Œå‡ ä¹æ‰€æœ‰ç¼–è¾‘å™¨éƒ½ä½¿ç”¨ç›¸åŒçš„å¿«æ·é”®"
  - "åœ¨ macOS ä¸Šï¼ŒCommand é”®æ›¿ä»£äº† Windows/Linux ä¸Šçš„ Ctrl é”®"
  - "ç­”æ¡ˆæ˜¯ Cmd+S (macOS) æˆ– Ctrl+S (Windows/Linux)"

tips: |
  ğŸ’¡ åŠ©è®°æŠ€å·§ï¼šS = Saveï¼Œç®€å•ç›´æ¥ï¼

prerequisites: []  # å‰ç½®å…³å¡ ID åˆ—è¡¨

tags: ["file", "basic", "essential"]
```

#### å…³å¡æ•°æ®ç»“æ„çš„ Go å®ç°

```go
// internal/engine/level.go
package engine

import (
    "fmt"
    "os"
    "path/filepath"
    "gopkg.in/yaml.v3"
)

// Level è¡¨ç¤ºä¸€ä¸ªè®­ç»ƒå…³å¡
type Level struct {
    ID            string            `yaml:"id"`
    Name          string            `yaml:"name"`
    Category      string            `yaml:"category"`
    Difficulty    Difficulty        `yaml:"difficulty"`
    Profile       KeymapProfile     `yaml:"profile"`
    Description   string            `yaml:"description"`
    Scenario      string            `yaml:"scenario"`
    ExpectedKeys  PlatformKeys      `yaml:"expected_keys"`
    Hints         []string          `yaml:"hints"`
    Tips          string            `yaml:"tips"`
    Prerequisites []string          `yaml:"prerequisites"`
    Tags          []string          `yaml:"tags"`
}

type Difficulty string

const (
    DifficultyBeginner     Difficulty = "beginner"
    DifficultyIntermediate Difficulty = "intermediate"
    DifficultyAdvanced     Difficulty = "advanced"
)

type KeymapProfile string

const (
    ProfileVSCode KeymapProfile = "vscode"
    ProfileVim    KeymapProfile = "vim"
    ProfileBoth   KeymapProfile = "both"
)

// PlatformKeys å­˜å‚¨ä¸åŒå¹³å°çš„å¿«æ·é”®
type PlatformKeys struct {
    MacOS   []string `yaml:"macos"`
    Windows []string `yaml:"windows"`
    Linux   []string `yaml:"linux"`
}

// LevelLoader è´Ÿè´£åŠ è½½å’Œç®¡ç†å…³å¡
type LevelLoader struct {
    levelsDir string
    levels    map[string]*Level
    order     []string // å…³å¡é¡ºåº
}

// NewLevelLoader åˆ›å»ºå…³å¡åŠ è½½å™¨
func NewLevelLoader(levelsDir string) *LevelLoader {
    return &LevelLoader{
        levelsDir: levelsDir,
        levels:    make(map[string]*Level),
        order:     make([]string, 0),
    }
}

// LoadAll åŠ è½½æ‰€æœ‰å…³å¡
func (l *LevelLoader) LoadAll() error {
    difficulties := []string{"beginner", "intermediate", "advanced"}
    
    for _, diff := range difficulties {
        dir := filepath.Join(l.levelsDir, diff)
        entries, err := os.ReadDir(dir)
        if err != nil {
            if os.IsNotExist(err) {
                continue
            }
            return fmt.Errorf("è¯»å–ç›®å½•å¤±è´¥ %s: %w", dir, err)
        }
        
        for _, entry := range entries {
            if entry.IsDir() || filepath.Ext(entry.Name()) != ".yaml" {
                continue
            }
            
            level, err := l.loadLevel(filepath.Join(dir, entry.Name()))
            if err != nil {
                return fmt.Errorf("åŠ è½½å…³å¡å¤±è´¥ %s: %w", entry.Name(), err)
            }
            
            l.levels[level.ID] = level
            l.order = append(l.order, level.ID)
        }
    }
    
    return nil
}

func (l *LevelLoader) loadLevel(path string) (*Level, error) {
    data, err := os.ReadFile(path)
    if err != nil {
        return nil, err
    }
    
    var level Level
    if err := yaml.Unmarshal(data, &level); err != nil {
        return nil, err
    }
    
    return &level, nil
}

// GetLevel è·å–æŒ‡å®š ID çš„å…³å¡
func (l *LevelLoader) GetLevel(id string) (*Level, bool) {
    level, ok := l.levels[id]
    return level, ok
}

// GetNextLevel è·å–ä¸‹ä¸€ä¸ªå…³å¡
func (l *LevelLoader) GetNextLevel(currentID string) (*Level, bool) {
    for i, id := range l.order {
        if id == currentID && i+1 < len(l.order) {
            return l.levels[l.order[i+1]], true
        }
    }
    return nil, false
}
```

---

### 4.2 æŒ‰é”®æ•è·ä¸éªŒè¯ (Key Capture & Verification)

è¿™æ˜¯æ•´ä¸ªå·¥å…·çš„æ ¸å¿ƒæ¨¡å—ï¼Œè´Ÿè´£æ•è·ç”¨æˆ·è¾“å…¥çš„æŒ‰é”®ç»„åˆå¹¶ä¸æ­£ç¡®ç­”æ¡ˆè¿›è¡Œæ¯”å¯¹ã€‚

```go
// internal/engine/verifier.go
package engine

import (
    "runtime"
    "sort"
    "strings"
    "time"

    "github.com/eiannone/keyboard"
)

// KeyCombination è¡¨ç¤ºä¸€ä¸ªå¿«æ·é”®ç»„åˆ
type KeyCombination struct {
    Modifiers []string // Ctrl, Alt, Shift, Cmd/Meta
    Key       string   // ä¸»é”®
}

// KeyVerifier è´Ÿè´£éªŒè¯ç”¨æˆ·è¾“å…¥çš„å¿«æ·é”®
type KeyVerifier struct {
    platform      string
    currentLevel  *Level
    capturedKeys  []string
    modifiersHeld map[string]bool
    startTime     time.Time
}

// NewKeyVerifier åˆ›å»ºæŒ‰é”®éªŒè¯å™¨
func NewKeyVerifier() *KeyVerifier {
    return &KeyVerifier{
        platform:      detectPlatform(),
        modifiersHeld: make(map[string]bool),
    }
}

func detectPlatform() string {
    switch runtime.GOOS {
    case "darwin":
        return "macos"
    case "windows":
        return "windows"
    default:
        return "linux"
    }
}

// SetLevel è®¾ç½®å½“å‰å…³å¡
func (v *KeyVerifier) SetLevel(level *Level) {
    v.currentLevel = level
    v.capturedKeys = nil
    v.modifiersHeld = make(map[string]bool)
}

// CaptureAndVerify æ•è·ç”¨æˆ·æŒ‰é”®å¹¶éªŒè¯
func (v *KeyVerifier) CaptureAndVerify() (VerifyResult, error) {
    if err := keyboard.Open(); err != nil {
        return VerifyResult{}, err
    }
    defer keyboard.Close()

    v.startTime = time.Now()
    v.capturedKeys = nil

    // ç­‰å¾…ç”¨æˆ·è¾“å…¥å®Œæ•´çš„å¿«æ·é”®ç»„åˆ
    for {
        char, key, err := keyboard.GetKey()
        if err != nil {
            return VerifyResult{}, err
        }

        // å¤„ç†æŒ‰é”®
        keyStr := v.parseKey(char, key)
        if keyStr == "" {
            continue
        }

        // æ£€æŸ¥æ˜¯å¦æ˜¯ä¿®é¥°é”®
        if isModifier(keyStr) {
            v.modifiersHeld[keyStr] = true
            continue
        }

        // éä¿®é¥°é”®ï¼Œæ„å»ºå®Œæ•´çš„ç»„åˆ
        v.capturedKeys = v.buildKeyCombination(keyStr)
        break
    }

    // éªŒè¯æŒ‰é”®ç»„åˆ
    result := v.verify()
    result.ResponseTime = time.Since(v.startTime)
    
    return result, nil
}

func (v *KeyVerifier) parseKey(char rune, key keyboard.Key) string {
    // å¤„ç†ç‰¹æ®Šé”®
    switch key {
    case keyboard.KeyCtrlC:
        return "Ctrl+C"
    case keyboard.KeyCtrlD:
        return "Ctrl+D"
    case keyboard.KeySpace:
        return "Space"
    case keyboard.KeyEnter:
        return "Enter"
    case keyboard.KeyEsc:
        return "Esc"
    case keyboard.KeyArrowUp:
        return "Up"
    case keyboard.KeyArrowDown:
        return "Down"
    case keyboard.KeyArrowLeft:
        return "Left"
    case keyboard.KeyArrowRight:
        return "Right"
    case keyboard.KeyTab:
        return "Tab"
    case keyboard.KeyBackspace, keyboard.KeyBackspace2:
        return "Backspace"
    case keyboard.KeyDelete:
        return "Delete"
    case keyboard.KeyHome:
        return "Home"
    case keyboard.KeyEnd:
        return "End"
    case keyboard.KeyPgup:
        return "PageUp"
    case keyboard.KeyPgdn:
        return "PageDown"
    case keyboard.KeyF1:
        return "F1"
    case keyboard.KeyF2:
        return "F2"
    // ... å…¶ä»– F é”®
    }

    // å¤„ç†æ™®é€šå­—ç¬¦
    if char != 0 {
        return strings.ToUpper(string(char))
    }

    return ""
}

func isModifier(key string) bool {
    modifiers := []string{"Ctrl", "Alt", "Shift", "Cmd", "Meta", "Option"}
    for _, m := range modifiers {
        if strings.EqualFold(key, m) {
            return true
        }
    }
    return false
}

func (v *KeyVerifier) buildKeyCombination(mainKey string) []string {
    var combo []string
    
    // æŒ‰å›ºå®šé¡ºåºæ·»åŠ ä¿®é¥°é”®
    modifierOrder := []string{"Ctrl", "Alt", "Shift", "Cmd"}
    for _, mod := range modifierOrder {
        if v.modifiersHeld[mod] {
            combo = append(combo, mod)
        }
    }
    
    combo = append(combo, mainKey)
    return combo
}

// VerifyResult éªŒè¯ç»“æœ
type VerifyResult struct {
    Correct      bool
    Expected     []string
    Actual       []string
    ResponseTime time.Duration
}

func (v *KeyVerifier) verify() VerifyResult {
    expected := v.getExpectedKeys()
    actual := v.capturedKeys

    result := VerifyResult{
        Expected: expected,
        Actual:   actual,
    }

    // æ ‡å‡†åŒ–å¹¶æ¯”è¾ƒ
    result.Correct = keysEqual(
        normalizeKeys(expected),
        normalizeKeys(actual),
    )

    return result
}

func (v *KeyVerifier) getExpectedKeys() []string {
    switch v.platform {
    case "macos":
        return v.currentLevel.ExpectedKeys.MacOS
    case "windows":
        return v.currentLevel.ExpectedKeys.Windows
    default:
        return v.currentLevel.ExpectedKeys.Linux
    }
}

func normalizeKeys(keys []string) []string {
    normalized := make([]string, len(keys))
    for i, k := range keys {
        normalized[i] = strings.ToLower(strings.TrimSpace(k))
    }
    sort.Strings(normalized[:len(normalized)-1]) // åªæ’åºä¿®é¥°é”®
    return normalized
}

func keysEqual(a, b []string) bool {
    if len(a) != len(b) {
        return false
    }
    for i := range a {
        if a[i] != b[i] {
            return false
        }
    }
    return true
}
```

---

### 4.3 æ¸¸æˆå¼•æ“ (Game Engine)

æ¸¸æˆå¼•æ“æ˜¯æ ¸å¿ƒæ§åˆ¶å™¨ï¼Œè´Ÿè´£ç®¡ç†æ¸¸æˆæµç¨‹ã€å…³å¡åˆ‡æ¢å’ŒçŠ¶æ€åŒæ­¥ã€‚

```go
// internal/engine/game.go
package engine

import (
    "errors"
    "fmt"
)

// GameState æ¸¸æˆçŠ¶æ€
type GameState string

const (
    StateIdle      GameState = "idle"
    StatePlaying   GameState = "playing"
    StateCompleted GameState = "completed"
)

// Game æ¸¸æˆå¼•æ“
type Game struct {
    loader       *LevelLoader
    verifier     *KeyVerifier
    progress     *ProgressStore
    stats        *StatsStore
    currentLevel *Level
    state        GameState
    profile      KeymapProfile
    hintLevel    int // å½“å‰æç¤ºçº§åˆ« (0 = æœªä½¿ç”¨æç¤º)
}

// NewGame åˆ›å»ºæ¸¸æˆå®ä¾‹
func NewGame(levelsDir, dataDir string) (*Game, error) {
    loader := NewLevelLoader(levelsDir)
    if err := loader.LoadAll(); err != nil {
        return nil, fmt.Errorf("åŠ è½½å…³å¡å¤±è´¥: %w", err)
    }

    progress, err := NewProgressStore(dataDir)
    if err != nil {
        return nil, fmt.Errorf("åˆå§‹åŒ–è¿›åº¦å­˜å‚¨å¤±è´¥: %w", err)
    }

    stats, err := NewStatsStore(dataDir)
    if err != nil {
        return nil, fmt.Errorf("åˆå§‹åŒ–ç»Ÿè®¡å­˜å‚¨å¤±è´¥: %w", err)
    }

    return &Game{
        loader:   loader,
        verifier: NewKeyVerifier(),
        progress: progress,
        stats:    stats,
        state:    StateIdle,
        profile:  ProfileVSCode,
    }, nil
}

// SetProfile è®¾ç½®é”®ä½é…ç½®æ–‡ä»¶
func (g *Game) SetProfile(profile KeymapProfile) {
    g.profile = profile
}

// Play å¼€å§‹æˆ–ç»§ç»­æ¸¸æˆ
func (g *Game) Play() (*PlayResult, error) {
    // è·å–å½“å‰å…³å¡
    currentID := g.progress.GetCurrentLevelID()
    level, ok := g.loader.GetLevel(currentID)
    if !ok {
        // å¦‚æœæ²¡æœ‰å½“å‰è¿›åº¦ï¼Œä»ç¬¬ä¸€å…³å¼€å§‹
        level = g.loader.GetFirstLevel()
        if level == nil {
            return nil, errors.New("æ²¡æœ‰å¯ç”¨çš„å…³å¡")
        }
    }

    // æ£€æŸ¥å…³å¡æ˜¯å¦é€‚ç”¨äºå½“å‰é…ç½®
    if !g.isLevelApplicable(level) {
        return nil, fmt.Errorf("å…³å¡ %s ä¸é€‚ç”¨äºå½“å‰é”®ä½é…ç½® %s", level.ID, g.profile)
    }

    g.currentLevel = level
    g.verifier.SetLevel(level)
    g.state = StatePlaying
    g.hintLevel = 0

    return &PlayResult{
        Level:       level,
        Description: level.Description,
    }, nil
}

func (g *Game) isLevelApplicable(level *Level) bool {
    if level.Profile == ProfileBoth {
        return true
    }
    return level.Profile == g.profile
}

// SubmitAnswer æäº¤ç­”æ¡ˆ
func (g *Game) SubmitAnswer() (*SubmitResult, error) {
    if g.state != StatePlaying {
        return nil, errors.New("å½“å‰æ²¡æœ‰æ­£åœ¨è¿›è¡Œçš„å…³å¡")
    }

    // æ•è·å¹¶éªŒè¯æŒ‰é”®
    verifyResult, err := g.verifier.CaptureAndVerify()
    if err != nil {
        return nil, fmt.Errorf("æŒ‰é”®æ•è·å¤±è´¥: %w", err)
    }

    result := &SubmitResult{
        Correct:      verifyResult.Correct,
        Expected:     verifyResult.Expected,
        Actual:       verifyResult.Actual,
        ResponseTime: verifyResult.ResponseTime,
        HintsUsed:    g.hintLevel,
    }

    // è®°å½•ç»Ÿè®¡
    g.stats.RecordAttempt(g.currentLevel.ID, AttemptRecord{
        Correct:      verifyResult.Correct,
        ResponseTime: verifyResult.ResponseTime,
        HintsUsed:    g.hintLevel,
    })

    if verifyResult.Correct {
        // æ ‡è®°å…³å¡å®Œæˆ
        g.progress.MarkCompleted(g.currentLevel.ID, g.calculateScore())
        
        // æ£€æŸ¥ä¸‹ä¸€å…³
        if nextLevel, ok := g.loader.GetNextLevel(g.currentLevel.ID); ok {
            g.progress.SetCurrentLevel(nextLevel.ID)
            result.NextLevel = nextLevel
        } else {
            g.state = StateCompleted
            result.GameCompleted = true
        }
    }

    return result, nil
}

// GetHint è·å–æç¤º
func (g *Game) GetHint() (string, error) {
    if g.currentLevel == nil {
        return "", errors.New("å½“å‰æ²¡æœ‰æ­£åœ¨è¿›è¡Œçš„å…³å¡")
    }

    if g.hintLevel >= len(g.currentLevel.Hints) {
        return "æ²¡æœ‰æ›´å¤šæç¤ºäº†ã€‚è¾“å…¥ 'keyforge answer' æŸ¥çœ‹ç­”æ¡ˆã€‚", nil
    }

    hint := g.currentLevel.Hints[g.hintLevel]
    g.hintLevel++

    return hint, nil
}

// GetAnswer è·å–ç­”æ¡ˆ
func (g *Game) GetAnswer() (string, error) {
    if g.currentLevel == nil {
        return "", errors.New("å½“å‰æ²¡æœ‰æ­£åœ¨è¿›è¡Œçš„å…³å¡")
    }

    g.hintLevel = len(g.currentLevel.Hints) + 1 // æ ‡è®°å·²æŸ¥çœ‹ç­”æ¡ˆ
    
    expected := g.verifier.getExpectedKeys()
    return fmt.Sprintf("ç­”æ¡ˆ: %s\n\n%s", 
        formatKeyCombination(expected),
        g.currentLevel.Tips,
    ), nil
}

// è®¡ç®—æœ¬æ¬¡å¾—åˆ† (ä½¿ç”¨æç¤ºä¼šå‡å°‘å¾—åˆ†)
func (g *Game) calculateScore() int {
    baseScore := 100
    hintPenalty := g.hintLevel * 20
    score := baseScore - hintPenalty
    if score < 0 {
        score = 0
    }
    return score
}

func formatKeyCombination(keys []string) string {
    return strings.Join(keys, " + ")
}

// PlayResult Play å‘½ä»¤çš„ç»“æœ
type PlayResult struct {
    Level       *Level
    Description string
}

// SubmitResult æäº¤ç­”æ¡ˆçš„ç»“æœ
type SubmitResult struct {
    Correct       bool
    Expected      []string
    Actual        []string
    ResponseTime  time.Duration
    HintsUsed     int
    NextLevel     *Level
    GameCompleted bool
}
```

---

### 4.4 è¿›åº¦å­˜å‚¨ (Progress Store)

```go
// internal/storage/progress.go
package storage

import (
    "encoding/json"
    "os"
    "path/filepath"
    "sync"
    "time"
)

// Progress ç”¨æˆ·è¿›åº¦æ•°æ®
type Progress struct {
    CurrentLevelID  string                    `json:"current_level_id"`
    CompletedLevels map[string]CompletedLevel `json:"completed_levels"`
    Profile         string                    `json:"profile"`
    CreatedAt       time.Time                 `json:"created_at"`
    UpdatedAt       time.Time                 `json:"updated_at"`
}

// CompletedLevel å·²å®Œæˆå…³å¡çš„è®°å½•
type CompletedLevel struct {
    CompletedAt  time.Time `json:"completed_at"`
    Score        int       `json:"score"`
    Attempts     int       `json:"attempts"`
    BestTime     int64     `json:"best_time_ms"`
}

// ProgressStore è¿›åº¦å­˜å‚¨
type ProgressStore struct {
    filePath string
    progress *Progress
    mu       sync.RWMutex
}

// NewProgressStore åˆ›å»ºè¿›åº¦å­˜å‚¨
func NewProgressStore(dataDir string) (*ProgressStore, error) {
    filePath := filepath.Join(dataDir, "progress.json")
    
    store := &ProgressStore{
        filePath: filePath,
    }

    if err := store.load(); err != nil {
        // æ–‡ä»¶ä¸å­˜åœ¨æ—¶åˆ›å»ºæ–°è¿›åº¦
        store.progress = &Progress{
            CompletedLevels: make(map[string]CompletedLevel),
            CreatedAt:       time.Now(),
            UpdatedAt:       time.Now(),
        }
    }

    return store, nil
}

func (s *ProgressStore) load() error {
    data, err := os.ReadFile(s.filePath)
    if err != nil {
        return err
    }

    var progress Progress
    if err := json.Unmarshal(data, &progress); err != nil {
        return err
    }

    s.progress = &progress
    return nil
}

func (s *ProgressStore) save() error {
    s.progress.UpdatedAt = time.Now()
    
    data, err := json.MarshalIndent(s.progress, "", "  ")
    if err != nil {
        return err
    }

    // ç¡®ä¿ç›®å½•å­˜åœ¨
    if err := os.MkdirAll(filepath.Dir(s.filePath), 0755); err != nil {
        return err
    }

    return os.WriteFile(s.filePath, data, 0644)
}

// GetCurrentLevelID è·å–å½“å‰å…³å¡ ID
func (s *ProgressStore) GetCurrentLevelID() string {
    s.mu.RLock()
    defer s.mu.RUnlock()
    return s.progress.CurrentLevelID
}

// SetCurrentLevel è®¾ç½®å½“å‰å…³å¡
func (s *ProgressStore) SetCurrentLevel(levelID string) error {
    s.mu.Lock()
    defer s.mu.Unlock()

    s.progress.CurrentLevelID = levelID
    return s.save()
}

// MarkCompleted æ ‡è®°å…³å¡å®Œæˆ
func (s *ProgressStore) MarkCompleted(levelID string, score int) error {
    s.mu.Lock()
    defer s.mu.Unlock()

    existing, exists := s.progress.CompletedLevels[levelID]
    
    completed := CompletedLevel{
        CompletedAt: time.Now(),
        Score:       score,
        Attempts:    1,
    }

    if exists {
        completed.Attempts = existing.Attempts + 1
        // ä¿ç•™æœ€é«˜åˆ†
        if existing.Score > score {
            completed.Score = existing.Score
        }
    }

    s.progress.CompletedLevels[levelID] = completed
    return s.save()
}

// GetStats è·å–è¿›åº¦ç»Ÿè®¡
func (s *ProgressStore) GetStats() ProgressStats {
    s.mu.RLock()
    defer s.mu.RUnlock()

    totalScore := 0
    for _, level := range s.progress.CompletedLevels {
        totalScore += level.Score
    }

    return ProgressStats{
        CompletedCount: len(s.progress.CompletedLevels),
        TotalScore:     totalScore,
    }
}

// Reset é‡ç½®æ‰€æœ‰è¿›åº¦
func (s *ProgressStore) Reset() error {
    s.mu.Lock()
    defer s.mu.Unlock()

    s.progress = &Progress{
        CompletedLevels: make(map[string]CompletedLevel),
        CreatedAt:       s.progress.CreatedAt,
        UpdatedAt:       time.Now(),
    }

    return s.save()
}

// ProgressStats è¿›åº¦ç»Ÿè®¡
type ProgressStats struct {
    CompletedCount int
    TotalScore     int
}
```

---

### 4.5 CLI å‘½ä»¤å®ç° (CLI Commands)

ä½¿ç”¨ Cobra æ¡†æ¶å®ç°å‘½ä»¤è¡Œæ¥å£ã€‚

```go
// internal/cli/root.go
package cli

import (
    "fmt"
    "os"

    "github.com/spf13/cobra"
    "github.com/user/keyforge/internal/engine"
)

var (
    game       *engine.Game
    configFile string
    profile    string
)

// rootCmd æ ¹å‘½ä»¤
var rootCmd = &cobra.Command{
    Use:   "keyforge",
    Short: "KeyForge - ç¼–è¾‘å™¨å¿«æ·é”®è®­ç»ƒå·¥å…·",
    Long: `KeyForge æ˜¯ä¸€ä¸ªäº¤äº’å¼çš„ç¼–è¾‘å™¨å¿«æ·é”®è®­ç»ƒå·¥å…·ã€‚
é€šè¿‡é—¯å…³çš„æ–¹å¼ï¼Œå¸®åŠ©ä½ å¿«é€ŸæŒæ¡ VSCode å’Œ Vim çš„å¿«æ·é”®ç»„åˆã€‚

ç±»ä¼¼äº Githug å·¥å…·ï¼Œé€šè¿‡å®è·µæ¥å­¦ä¹ å’Œè®°å¿†å¿«æ·é”®ã€‚`,
}

// Execute æ‰§è¡Œ CLI
func Execute() {
    if err := rootCmd.Execute(); err != nil {
        fmt.Fprintln(os.Stderr, err)
        os.Exit(1)
    }
}

func init() {
    cobra.OnInitialize(initConfig)
    
    rootCmd.PersistentFlags().StringVar(&configFile, "config", "", 
        "é…ç½®æ–‡ä»¶è·¯å¾„ (é»˜è®¤ä¸º $HOME/.keyforge/config.yaml)")
    rootCmd.PersistentFlags().StringVar(&profile, "profile", "vscode",
        "é”®ä½é…ç½®: vscode, vim")
}

func initConfig() {
    // åˆå§‹åŒ–æ¸¸æˆå¼•æ“
    homeDir, _ := os.UserHomeDir()
    levelsDir := filepath.Join(homeDir, ".keyforge", "levels")
    dataDir := filepath.Join(homeDir, ".keyforge", "data")

    var err error
    game, err = engine.NewGame(levelsDir, dataDir)
    if err != nil {
        fmt.Fprintf(os.Stderr, "åˆå§‹åŒ–å¤±è´¥: %v\n", err)
        os.Exit(1)
    }

    // è®¾ç½®é”®ä½é…ç½®
    game.SetProfile(engine.KeymapProfile(profile))
}
```

```go
// internal/cli/play.go
package cli

import (
    "fmt"

    "github.com/charmbracelet/lipgloss"
    "github.com/spf13/cobra"
)

var playCmd = &cobra.Command{
    Use:   "play",
    Short: "å¼€å§‹æˆ–ç»§ç»­è®­ç»ƒ",
    Long:  "å¼€å§‹æ–°çš„è®­ç»ƒæˆ–ç»§ç»­ä¸Šæ¬¡çš„è¿›åº¦",
    Run:   runPlay,
}

func init() {
    rootCmd.AddCommand(playCmd)
}

func runPlay(cmd *cobra.Command, args []string) {
    result, err := game.Play()
    if err != nil {
        fmt.Printf("âŒ é”™è¯¯: %v\n", err)
        return
    }

    // æ¸²æŸ“å…³å¡ä¿¡æ¯
    renderLevel(result)

    // ç­‰å¾…ç”¨æˆ·è¾“å…¥å¿«æ·é”®
    fmt.Println("\nğŸ¯ è¯·è¾“å…¥å¿«æ·é”®ç»„åˆ...")
    fmt.Println("(æŒ‰ä¸‹ä½ è®¤ä¸ºæ­£ç¡®çš„å¿«æ·é”®)")
    fmt.Println()

    submitResult, err := game.SubmitAnswer()
    if err != nil {
        fmt.Printf("âŒ é”™è¯¯: %v\n", err)
        return
    }

    renderResult(submitResult)
}

func renderLevel(result *engine.PlayResult) {
    level := result.Level

    // ä½¿ç”¨ lipgloss æ¸²æŸ“æ ·å¼
    titleStyle := lipgloss.NewStyle().
        Bold(true).
        Foreground(lipgloss.Color("212")).
        MarginBottom(1)

    descStyle := lipgloss.NewStyle().
        Foreground(lipgloss.Color("252")).
        PaddingLeft(2)

    infoStyle := lipgloss.NewStyle().
        Foreground(lipgloss.Color("241"))

    fmt.Println()
    fmt.Println(titleStyle.Render(fmt.Sprintf("ğŸ“š å…³å¡ %s: %s", level.ID, level.Name)))
    fmt.Println(infoStyle.Render(fmt.Sprintf("   éš¾åº¦: %s | åˆ†ç±»: %s", level.Difficulty, level.Category)))
    fmt.Println()
    fmt.Println(descStyle.Render(level.Description))
}

func renderResult(result *engine.SubmitResult) {
    if result.Correct {
        successStyle := lipgloss.NewStyle().
            Bold(true).
            Foreground(lipgloss.Color("46"))
        
        fmt.Println()
        fmt.Println(successStyle.Render("âœ… æ­£ç¡®ï¼"))
        fmt.Printf("   å“åº”æ—¶é—´: %v\n", result.ResponseTime)

        if result.GameCompleted {
            fmt.Println()
            fmt.Println("ğŸ‰ æ­å–œï¼ä½ å·²å®Œæˆæ‰€æœ‰å…³å¡ï¼")
        } else if result.NextLevel != nil {
            fmt.Println()
            fmt.Printf("â­ï¸  ä¸‹ä¸€å…³: %s - %s\n", result.NextLevel.ID, result.NextLevel.Name)
            fmt.Println("   è¾“å…¥ 'keyforge play' ç»§ç»­")
        }
    } else {
        errorStyle := lipgloss.NewStyle().
            Bold(true).
            Foreground(lipgloss.Color("196"))
        
        fmt.Println()
        fmt.Println(errorStyle.Render("âŒ ä¸æ­£ç¡®"))
        fmt.Printf("   ä½ è¾“å…¥çš„: %v\n", formatKeys(result.Actual))
        fmt.Println()
        fmt.Println("ğŸ’¡ ä½¿ç”¨ 'keyforge hint' è·å–æç¤º")
        fmt.Println("   ä½¿ç”¨ 'keyforge play' é‡æ–°å°è¯•")
    }
}

func formatKeys(keys []string) string {
    return strings.Join(keys, " + ")
}
```

```go
// internal/cli/hint.go
package cli

import (
    "fmt"

    "github.com/charmbracelet/lipgloss"
    "github.com/spf13/cobra"
)

var hintCmd = &cobra.Command{
    Use:   "hint",
    Short: "è·å–å½“å‰å…³å¡çš„æç¤º",
    Run:   runHint,
}

func init() {
    rootCmd.AddCommand(hintCmd)
}

func runHint(cmd *cobra.Command, args []string) {
    hint, err := game.GetHint()
    if err != nil {
        fmt.Printf("âŒ é”™è¯¯: %v\n", err)
        return
    }

    hintStyle := lipgloss.NewStyle().
        Foreground(lipgloss.Color("226")).
        PaddingLeft(2)

    fmt.Println()
    fmt.Println("ğŸ’¡ æç¤º:")
    fmt.Println(hintStyle.Render(hint))
    fmt.Println()
}
```

```go
// internal/cli/levels.go
package cli

import (
    "fmt"

    "github.com/charmbracelet/lipgloss"
    "github.com/spf13/cobra"
)

var levelsCmd = &cobra.Command{
    Use:   "levels",
    Short: "æŸ¥çœ‹æ‰€æœ‰å…³å¡",
    Run:   runLevels,
}

func init() {
    rootCmd.AddCommand(levelsCmd)
}

func runLevels(cmd *cobra.Command, args []string) {
    levels := game.GetAllLevels()
    progress := game.GetProgress()

    // æ ·å¼å®šä¹‰
    completedStyle := lipgloss.NewStyle().Foreground(lipgloss.Color("46"))
    currentStyle := lipgloss.NewStyle().Foreground(lipgloss.Color("226")).Bold(true)
    lockedStyle := lipgloss.NewStyle().Foreground(lipgloss.Color("241"))

    fmt.Println()
    fmt.Println("ğŸ“‹ å…³å¡åˆ—è¡¨")
    fmt.Println()

    currentDifficulty := ""
    for _, level := range levels {
        // æ‰“å°éš¾åº¦åˆ†ç±»æ ‡é¢˜
        if level.Difficulty != currentDifficulty {
            currentDifficulty = level.Difficulty
            fmt.Printf("\n  == %s ==\n\n", difficultyLabel(currentDifficulty))
        }

        // ç¡®å®šçŠ¶æ€å’Œæ ·å¼
        var status string
        var style lipgloss.Style

        if progress.IsCompleted(level.ID) {
            status = "âœ…"
            style = completedStyle
        } else if progress.IsCurrent(level.ID) {
            status = "â–¶ï¸"
            style = currentStyle
        } else if progress.IsUnlocked(level.ID) {
            status = "ğŸ”“"
            style = lipgloss.NewStyle()
        } else {
            status = "ğŸ”’"
            style = lockedStyle
        }

        line := fmt.Sprintf("  %s %s: %s", status, level.ID, level.Name)
        fmt.Println(style.Render(line))
    }

    fmt.Println()
}

func difficultyLabel(d string) string {
    switch d {
    case "beginner":
        return "ğŸŒ± åˆçº§"
    case "intermediate":
        return "ğŸŒ¿ ä¸­çº§"
    case "advanced":
        return "ğŸŒ³ é«˜çº§"
    default:
        return d
    }
}
```

```go
// internal/cli/stats.go
package cli

import (
    "fmt"

    "github.com/charmbracelet/lipgloss"
    "github.com/spf13/cobra"
)

var statsCmd = &cobra.Command{
    Use:   "stats",
    Short: "æŸ¥çœ‹è®­ç»ƒç»Ÿè®¡",
    Run:   runStats,
}

func init() {
    rootCmd.AddCommand(statsCmd)
}

func runStats(cmd *cobra.Command, args []string) {
    stats := game.GetStats()
    progress := game.GetProgress()

    // æ ·å¼
    headerStyle := lipgloss.NewStyle().
        Bold(true).
        Foreground(lipgloss.Color("212"))

    fmt.Println()
    fmt.Println(headerStyle.Render("ğŸ“Š è®­ç»ƒç»Ÿè®¡"))
    fmt.Println()

    // è¿›åº¦æ¦‚è§ˆ
    totalLevels := game.GetTotalLevelCount()
    completedCount := progress.GetCompletedCount()
    percentage := float64(completedCount) / float64(totalLevels) * 100

    fmt.Printf("  ğŸ“ˆ å®Œæˆè¿›åº¦: %d/%d (%.1f%%)\n", completedCount, totalLevels, percentage)
    fmt.Printf("  ğŸ† æ€»å¾—åˆ†: %d\n", progress.GetTotalScore())
    fmt.Println()

    // ç»˜åˆ¶è¿›åº¦æ¡
    renderProgressBar(percentage)
    fmt.Println()

    // è¯¦ç»†ç»Ÿè®¡
    if stats.TotalAttempts > 0 {
        fmt.Println("  ğŸ“ è¯¦ç»†ç»Ÿè®¡:")
        fmt.Printf("     æ€»å°è¯•æ¬¡æ•°: %d\n", stats.TotalAttempts)
        fmt.Printf("     é¦–æ¬¡é€šè¿‡ç‡: %.1f%%\n", stats.FirstTrySuccessRate*100)
        fmt.Printf("     å¹³å‡å“åº”æ—¶é—´: %v\n", stats.AverageResponseTime)
        fmt.Println()

        // éœ€è¦å¤ä¹ çš„å…³å¡
        if len(stats.WeakLevels) > 0 {
            fmt.Println("  âš ï¸ å»ºè®®å¤ä¹ :")
            for _, level := range stats.WeakLevels {
                fmt.Printf("     - %s: %s (é”™è¯¯ç‡: %.0f%%)\n", 
                    level.ID, level.Name, level.ErrorRate*100)
            }
        }
    }

    fmt.Println()
}

func renderProgressBar(percentage float64) {
    width := 30
    filled := int(percentage / 100 * float64(width))

    bar := "["
    for i := 0; i < width; i++ {
        if i < filled {
            bar += "â–ˆ"
        } else {
            bar += "â–‘"
        }
    }
    bar += "]"

    barStyle := lipgloss.NewStyle().Foreground(lipgloss.Color("46"))
    fmt.Print("  ")
    fmt.Println(barStyle.Render(bar))
}
```

---

## 5. å…³å¡å†…å®¹è§„åˆ’

### 5.1 åˆçº§å…³å¡ (Beginner) - å…± 30 å…³

| ID | åç§° | å¿«æ·é”® (macOS) | åˆ†ç±» |
|----|------|---------------|------|
| 001 | ä¿å­˜æ–‡ä»¶ | Cmd+S | æ–‡ä»¶æ“ä½œ |
| 002 | å…¨é€‰ | Cmd+A | ç¼–è¾‘åŸºç¡€ |
| 003 | å¤åˆ¶ | Cmd+C | ç¼–è¾‘åŸºç¡€ |
| 004 | ç²˜è´´ | Cmd+V | ç¼–è¾‘åŸºç¡€ |
| 005 | å‰ªåˆ‡ | Cmd+X | ç¼–è¾‘åŸºç¡€ |
| 006 | æ’¤é”€ | Cmd+Z | ç¼–è¾‘åŸºç¡€ |
| 007 | é‡åš | Cmd+Shift+Z | ç¼–è¾‘åŸºç¡€ |
| 008 | æŸ¥æ‰¾ | Cmd+F | æœç´¢ |
| 009 | æ›¿æ¢ | Cmd+Option+F | æœç´¢ |
| 010 | æ–°å»ºæ–‡ä»¶ | Cmd+N | æ–‡ä»¶æ“ä½œ |
| ... | ... | ... | ... |

### 5.2 ä¸­çº§å…³å¡ (Intermediate) - å…± 40 å…³

| ID | åç§° | å¿«æ·é”® (macOS) | åˆ†ç±» |
|----|------|---------------|------|
| 101 | å¿«é€Ÿæ‰“å¼€æ–‡ä»¶ | Cmd+P | å¯¼èˆª |
| 102 | å‘½ä»¤é¢æ¿ | Cmd+Shift+P | å‘½ä»¤ |
| 103 | è·³è½¬åˆ°è¡Œ | Ctrl+G | å¯¼èˆª |
| 104 | è·³è½¬åˆ°ç¬¦å· | Cmd+Shift+O | å¯¼èˆª |
| 105 | å¤šå…‰æ ‡ç¼–è¾‘ | Cmd+Option+â†“ | é«˜çº§ç¼–è¾‘ |
| 106 | é€‰ä¸­ä¸‹ä¸€ä¸ªåŒ¹é… | Cmd+D | å¤šé€‰ |
| 107 | é€‰ä¸­æ‰€æœ‰åŒ¹é… | Cmd+Shift+L | å¤šé€‰ |
| 108 | å¤åˆ¶å½“å‰è¡Œ | Shift+Option+â†“ | è¡Œæ“ä½œ |
| 109 | ç§»åŠ¨è¡Œ | Option+â†‘/â†“ | è¡Œæ“ä½œ |
| 110 | åˆ é™¤è¡Œ | Cmd+Shift+K | è¡Œæ“ä½œ |
| ... | ... | ... | ... |

### 5.3 é«˜çº§å…³å¡ (Advanced) - å…± 30 å…³

| ID | åç§° | å¿«æ·é”® (macOS) | åˆ†ç±» |
|----|------|---------------|------|
| 201 | æŠ˜å ä»£ç å— | Cmd+Option+[ | ä»£ç æŠ˜å  |
| 202 | å±•å¼€ä»£ç å— | Cmd+Option+] | ä»£ç æŠ˜å  |
| 203 | è½¬åˆ°å®šä¹‰ | F12 | ä»£ç å¯¼èˆª |
| 204 | æŸ¥çœ‹å¼•ç”¨ | Shift+F12 | ä»£ç å¯¼èˆª |
| 205 | é‡å‘½åç¬¦å· | F2 | é‡æ„ |
| 206 | æ ¼å¼åŒ–æ–‡æ¡£ | Shift+Option+F | æ ¼å¼åŒ– |
| 207 | æ˜¾ç¤ºé—®é¢˜é¢æ¿ | Cmd+Shift+M | é¢æ¿ |
| 208 | åˆ‡æ¢ç»ˆç«¯ | Ctrl+` | ç»ˆç«¯ |
| 209 | åˆ†å±ç¼–è¾‘ | Cmd+\ | ç¼–è¾‘å™¨ |
| 210 | å…³é—­ç¼–è¾‘å™¨ | Cmd+W | ç¼–è¾‘å™¨ |
| ... | ... | ... | ... |

### 5.4 Vim æ¨¡å¼å…³å¡ (VSCode + Vim)

| ID | åç§° | æŒ‰é”® | åˆ†ç±» |
|----|------|------|------|
| V01 | è¿›å…¥æ™®é€šæ¨¡å¼ | Esc | æ¨¡å¼åˆ‡æ¢ |
| V02 | è¿›å…¥æ’å…¥æ¨¡å¼ | i | æ¨¡å¼åˆ‡æ¢ |
| V03 | è¡Œå°¾æ’å…¥ | A | æ¨¡å¼åˆ‡æ¢ |
| V04 | å‘ä¸‹ç§»åŠ¨ | j | ç§»åŠ¨ |
| V05 | å‘ä¸Šç§»åŠ¨ | k | ç§»åŠ¨ |
| V06 | å‘å·¦ç§»åŠ¨ | h | ç§»åŠ¨ |
| V07 | å‘å³ç§»åŠ¨ | l | ç§»åŠ¨ |
| V08 | å•è¯è·³è½¬ | w | ç§»åŠ¨ |
| V09 | åˆ é™¤å­—ç¬¦ | x | ç¼–è¾‘ |
| V10 | åˆ é™¤è¡Œ | dd | ç¼–è¾‘ |
| V11 | å¤åˆ¶è¡Œ | yy | ç¼–è¾‘ |
| V12 | ç²˜è´´ | p | ç¼–è¾‘ |
| ... | ... | ... | ... |

---

## 6. ç”¨æˆ·ä½“éªŒæµç¨‹

### 6.1 é¦–æ¬¡ä½¿ç”¨æµç¨‹

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  $ keyforge                                                 â”‚
â”‚                                                             â”‚
â”‚  â•­â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•®  â”‚
â”‚  â”‚  ğŸ”‘ KeyForge v1.0.0                                   â”‚  â”‚
â”‚  â”‚  ç¼–è¾‘å™¨å¿«æ·é”®è®­ç»ƒå·¥å…·                                  â”‚  â”‚
â”‚  â•°â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•¯  â”‚
â”‚                                                             â”‚
â”‚  æ¬¢è¿ä½¿ç”¨ KeyForgeï¼è¿™æ˜¯ä¸€ä¸ªå¸®åŠ©ä½ æŒæ¡ç¼–è¾‘å™¨å¿«æ·é”®çš„å·¥å…·ã€‚  â”‚
â”‚                                                             â”‚
â”‚  ğŸ“‹ å¯ç”¨å‘½ä»¤:                                               â”‚
â”‚     keyforge play      å¼€å§‹/ç»§ç»­è®­ç»ƒ                        â”‚
â”‚     keyforge hint      è·å–æç¤º                             â”‚
â”‚     keyforge levels    æŸ¥çœ‹å…³å¡åˆ—è¡¨                         â”‚
â”‚     keyforge stats     æŸ¥çœ‹è®­ç»ƒç»Ÿè®¡                         â”‚
â”‚     keyforge config    é…ç½®è®¾ç½®                             â”‚
â”‚                                                             â”‚
â”‚  ğŸ“– ä½¿ç”¨ --help è·å–æ›´å¤šä¿¡æ¯                                â”‚
â”‚                                                             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 6.2 è®­ç»ƒæµç¨‹

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  $ keyforge play                                           â”‚
â”‚                                                             â”‚
â”‚  â•­â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•®  â”‚
â”‚  â”‚  ğŸ“š å…³å¡ 001: ä¿å­˜æ–‡ä»¶                                â”‚  â”‚
â”‚  â”‚     éš¾åº¦: åˆçº§ | åˆ†ç±»: æ–‡ä»¶æ“ä½œ                        â”‚  â”‚
â”‚  â•°â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•¯  â”‚
â”‚                                                             â”‚
â”‚  åœºæ™¯æè¿°:                                                  â”‚
â”‚    ä½ åˆšåˆšå†™å®Œä¸€æ®µä»£ç ï¼Œç°åœ¨éœ€è¦ä¿å­˜æ–‡ä»¶ã€‚                   â”‚
â”‚    è¯·è¾“å…¥æ­£ç¡®çš„å¿«æ·é”®ç»„åˆæ¥ä¿å­˜å½“å‰æ–‡ä»¶ã€‚                   â”‚
â”‚                                                             â”‚
â”‚  ğŸ¯ è¯·è¾“å…¥å¿«æ·é”®ç»„åˆ...                                     â”‚
â”‚  (æŒ‰ä¸‹ä½ è®¤ä¸ºæ­£ç¡®çš„å¿«æ·é”®)                                   â”‚
â”‚                                                             â”‚
â”‚  > [ç”¨æˆ·æŒ‰ä¸‹ Cmd+S]                                         â”‚
â”‚                                                             â”‚
â”‚  âœ… æ­£ç¡®ï¼                                                  â”‚
â”‚     å“åº”æ—¶é—´: 1.2s                                         â”‚
â”‚                                                             â”‚
â”‚  â­ï¸  ä¸‹ä¸€å…³: 002 - å…¨é€‰                                     â”‚
â”‚     è¾“å…¥ 'keyforge play' ç»§ç»­                               â”‚
â”‚                                                             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 6.3 é”™è¯¯ä¸æç¤ºæµç¨‹

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  $ keyforge play                                           â”‚
â”‚                                                             â”‚
â”‚  ğŸ“š å…³å¡ 106: é€‰ä¸­ä¸‹ä¸€ä¸ªåŒ¹é…                                â”‚
â”‚                                                             â”‚
â”‚  åœºæ™¯æè¿°:                                                  â”‚
â”‚    ä½ é€‰ä¸­äº†ä¸€ä¸ªå˜é‡åï¼Œæƒ³è¦åŒæ—¶é€‰ä¸­æ–‡ä»¶ä¸­æ‰€æœ‰ç›¸åŒçš„å˜é‡å   â”‚
â”‚    è¿›è¡ŒåŒæ—¶ç¼–è¾‘ã€‚è¯·ä½¿ç”¨å¿«æ·é”®é€‰ä¸­ä¸‹ä¸€ä¸ªåŒ¹é…é¡¹ã€‚             â”‚
â”‚                                                             â”‚
â”‚  > [ç”¨æˆ·æŒ‰ä¸‹ Cmd+F]                                         â”‚
â”‚                                                             â”‚
â”‚  âŒ ä¸æ­£ç¡®                                                  â”‚
â”‚     ä½ è¾“å…¥çš„: Cmd + F                                       â”‚
â”‚                                                             â”‚
â”‚  ğŸ’¡ ä½¿ç”¨ 'keyforge hint' è·å–æç¤º                           â”‚
â”‚                                                             â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  $ keyforge hint                                           â”‚
â”‚                                                             â”‚
â”‚  ğŸ’¡ æç¤º:                                                   â”‚
â”‚     è¿™ä¸ªå¿«æ·é”®å’Œä¸€ä¸ªè‹±æ–‡å­—æ¯æœ‰å…³ï¼Œè¿™ä¸ªå­—æ¯æ˜¯ "D"ï¼Œ           â”‚
â”‚     ä»£è¡¨ "Double" æˆ– "Duplicate selection"                  â”‚
â”‚                                                             â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  $ keyforge play                                           â”‚
â”‚                                                             â”‚
â”‚  > [ç”¨æˆ·æŒ‰ä¸‹ Cmd+D]                                         â”‚
â”‚                                                             â”‚
â”‚  âœ… æ­£ç¡®ï¼                                                  â”‚
â”‚                                                             â”‚
â”‚  ğŸ’¡ åŠ©è®°æŠ€å·§ï¼šD = Doubleï¼ŒåŒé‡é€‰æ‹©ï¼                        â”‚
â”‚                                                             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## 7. æ•°æ®å­˜å‚¨è®¾è®¡

### 7.1 å­˜å‚¨ç›®å½•ç»“æ„

```
~/.keyforge/
â”œâ”€â”€ config.yaml          # ç”¨æˆ·é…ç½®
â”œâ”€â”€ data/
â”‚   â”œâ”€â”€ progress.json    # è®­ç»ƒè¿›åº¦
â”‚   â””â”€â”€ stats.json       # è¯¦ç»†ç»Ÿè®¡
â””â”€â”€ levels/              # å…³å¡æ–‡ä»¶ (å¯è¦†ç›–å†…ç½®å…³å¡)
    â””â”€â”€ custom/          # ç”¨æˆ·è‡ªå®šä¹‰å…³å¡
```

### 7.2 é…ç½®æ–‡ä»¶æ ¼å¼

```yaml
# ~/.keyforge/config.yaml
profile: vscode          # vscode | vim
platform: auto          # auto | macos | windows | linux
language: zh-CN         # zh-CN | en-US
theme: dark             # dark | light

notifications:
  sound: true           # æ’­æ”¾æç¤ºéŸ³
  
review:
  enabled: true         # å¯ç”¨å¤ä¹ æé†’
  interval: 24h         # å¤ä¹ é—´éš”
```

---

## 8. æœªæ¥æ‰©å±•

### 8.1 è®¡åˆ’åŠŸèƒ½ (v2.0)

- [ ] åœ¨çº¿æ’è¡Œæ¦œ
- [ ] å¤šäººç«æŠ€æ¨¡å¼
- [ ] IDE æ’ä»¶é›†æˆ
- [ ] è‡ªå®šä¹‰ä¸»é¢˜
- [ ] å¯¼å‡ºå­¦ä¹ æŠ¥å‘Š

### 8.2 æ”¯æŒæ›´å¤šç¼–è¾‘å™¨

- [ ] JetBrains IDEs (IntelliJ, WebStorm ç­‰)
- [ ] Sublime Text
- [ ] Neovim
- [ ] Emacs

---

## 9. é™„å½•

### 9.1 å‚è€ƒèµ„æ–™

- [Githug - Git å­¦ä¹ å·¥å…·](https://github.com/Gazler/githug)
- [VSCode å¿«æ·é”®æ–‡æ¡£](https://code.visualstudio.com/docs/getstarted/keybindings)
- [VSCode Vim æ‰©å±•](https://github.com/VSCodeVim/Vim)
- [Cobra CLI æ¡†æ¶](https://github.com/spf13/cobra)
- [Bubble Tea TUI æ¡†æ¶](https://github.com/charmbracelet/bubbletea)

### 9.2 æœ¯è¯­è¡¨

| æœ¯è¯­ | è¯´æ˜ |
|------|------|
| å…³å¡ (Level) | å•ä¸ªå¿«æ·é”®è®­ç»ƒæŒ‘æˆ˜ |
| é”®ä½é…ç½® (Profile) | å¿«æ·é”®æ–¹æ¡ˆï¼Œå¦‚ VSCodeã€Vim |
| ä¿®é¥°é”® (Modifier) | Ctrlã€Altã€Shiftã€Cmd ç­‰ |
| ç»„åˆé”® (Combination) | å¤šä¸ªæŒ‰é”®åŒæ—¶æŒ‰ä¸‹çš„æ“ä½œ |

---

*æ–‡æ¡£ç‰ˆæœ¬: v1.0*  
*æœ€åæ›´æ–°: 2024-12*
